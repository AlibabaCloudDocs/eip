# 绑定云资源

您可以将弹性公网IP（Elastic IP Address，简称EIP）绑定到云资源上。一个EIP只支持绑定到一种云资源上，目前支持绑定到专有网络类型的ECS实例、NAT网关实例、专有网络类型CLB（原SLB）实例、高可用虚拟IP实例或者弹性网卡上。

## 任务

-   [绑定ECS实例](#section_sru_h5a_crt)
-   [绑定NAT网关](#section_w98_wzz_2xe)
-   [绑定SLB实例](#section_9t9_sks_d5b)
-   [绑定高可用虚拟IP](#section_x3h_3ft_rat)
-   [绑定弹性网卡](#section_glo_o0q_qno)
-   [解绑EIP](#section_57j_61z_cwj)

## 绑定ECS实例

您已经创建了ECS实例。具体操作，请参见[使用向导创建实例](/cn.zh-CN/实例/创建实例/使用向导创建实例.md)。

1.  登录[弹性公网IP管理控制台](https://vpc.console.aliyun.com/eip)。

2.  在顶部菜单栏处，选择EIP的地域。

3.  在**弹性公网IP**页面，找到目标EIP，在**操作**列单击**绑定资源**。

4.  在**绑定弹性公网IP至资源**对话框，完成以下配置，然后单击**确定**。

    |配置|说明|
    |--|--|
    |**实例类型**|选择**云服务器ECS实例**。|
    |**资源组**|选择云服务器ECS实例所属的资源组。|
    |**绑定模式**|选择EIP绑定ECS实例的绑定模式。目前，仅支持普通模式。在普通模式下：

    -   EIP以NAT模式和ECS实例绑定，ECS实例的私网IP地址和公网IP地址同时可用。
    -   EIP在操作系统内部不可见，需要通过DescribeInstances接口查询ECS实例绑定的公网IP地址。更多信息，请参见[DescribeInstances](/cn.zh-CN/API参考/实例/DescribeInstances.md)。
    -   不支持需要做NAT ALG的协议，例如H.323、SIP、DNS、RTSP、TFTP等协议。 |
    |**选择要绑定的**|选择要绑定的ECS实例。要绑定的ECS实例必须满足以下条件：

    -   ECS实例的网络类型必须是专有网络。
    -   ECS实例必须处于运行中或停止状态。
    -   一个ECS实例只能绑定一个EIP。
    -   ECS实例的地域必须和要绑定的EIP的地域相同。
    -   ECS实例没有配置固定公网IP且没有绑定其他EIP。 |


## 绑定NAT网关

您已经创建了NAT网关。更多信息，请参见[创建NAT网关实例](/cn.zh-CN/基本功能操作/创建NAT网关实例.md)。

1.  登录[弹性公网IP管理控制台](https://vpc.console.aliyun.com/eip)。

2.  在顶部菜单栏处，选择EIP的地域。

3.  在**弹性公网IP**页面，找到目标EIP，在**操作**列单击**绑定资源**。

4.  在**绑定弹性公网IP至资源**对话框，完成以下配置，然后单击**确定**。

    |配置|说明|
    |--|--|
    |**实例类型**|选择**NAT网关**。|
    |**资源组**|选择NAT网关所属的资源组。|
    |**选择要绑定的**|选择要绑定的NAT网关实例。要绑定的NAT网关实例必须满足以下条件：

    -   NAT网关所属的账号在2017年11月03日前没有购买过NAT带宽包。如有购买，请使用NAT带宽包绑定NAT网关。
    -   NAT网关的地域必须和EIP的地域相同。
    -   一个NAT网关最多可以绑定20个EIP，其中最多支持绑定10个按使用流量计费的EIP。如需绑定更多的EIP，请提升配额。更多信息，请参见[管理配额](/cn.zh-CN/用户指南/管理配额.md)。 |


## 绑定SLB实例

您已经创建了SLB实例。具体操作，请参见[创建实例](/cn.zh-CN/传统型负载均衡CLB/CLB快速入门/创建实例.md)。

1.  登录[弹性公网IP管理控制台](https://vpc.console.aliyun.com/eip)。

2.  在顶部菜单栏处，选择EIP的地域。

3.  在**弹性公网IP**页面，找到目标EIP，在**操作**列单击**绑定资源**。

4.  在**绑定弹性公网IP至资源**对话框，完成以下配置，然后单击**确定**。

    |配置|说明|
    |--|--|
    |**实例类型**|选择**负载均衡SLB实例**。|
    |**资源组**|选择SLB实例所属的资源组。|
    |**选择要绑定的**|选择要绑定的SLB实例。要绑定的SLB实例必须满足以下条件：

    -   SLB实例的网络类型必须是专有网络。
    -   SLB实例的地域必须和EIP的地域相同。
    -   一个SLB实例仅支持绑定一个EIP。
**说明：** 当您将私网SLB绑定至EIP时，如该SLB实例上有私网业务流量，会发生闪断，建议在业务低谷期操作，或将业务切换至其他实例后再操作。 |


## 绑定高可用虚拟IP

您已经创建了高可用虚拟IP。详细信息，请参见[使用高可用虚拟IP](/cn.zh-CN/高可用/高可用虚拟IP/使用高可用虚拟IP.md)。

1.  登录[弹性公网IP管理控制台](https://vpc.console.aliyun.com/eip)。

2.  在顶部菜单栏处，选择EIP的地域。

3.  在**弹性公网IP**页面，找到目标EIP，在**操作**列单击**绑定资源**。

4.  在**绑定弹性公网IP**页面，完成以下配置，然后单击**确定**。

    |配置|说明|
    |:-|:-|
    |**实例类型**|选择**高可用虚拟IP**。|
    |**高可用虚拟IP**|选择要绑定的高可用虚拟IP实例。 要绑定的高可用虚拟IP必须满足以下条件：

    -   高可用虚拟IP实例的地域必须和EIP的地域相同。
    -   高可用虚拟IP实例必须处于可用或已分配状态。
    -   一个高可用虚拟IP实例只能绑定一个EIP。 |


## 绑定弹性网卡



EIP支持绑定弹性网卡ENI（Elastic Network Interface）。通过绑定弹性网卡，您可以构造出更健壮、更灵活、扩展性更强的IT解决方案，同时让单台服务器具备多个公网IP的能力。弹性网卡本身提供一个私网IP，在绑定EIP后，弹性网卡相当于同时具备了私网IP和公网IP。在将绑定了EIP的弹性网卡从ECS实例上迁移时，也同时完成了私网IP和公网IP的迁移，为同时使用公网IP和私网IP的ECS实例提供了高可靠和高可用的IP迁移解决方案。

![绑定ENI](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/7542180261/p10409.png)

一个ECS实例支持绑定多个弹性网卡。您可以为每个弹性网卡绑定一个EIP，这样该ECS实例就拥有了多个公网IP。配合安全组规则，您可以灵活地使用这些公网IP对外提供服务。

![绑定多ENI](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8302180261/p10410.png)

EIP绑定弹性网卡分为以下两种模式：

-   普通模式
-   EIP网卡可见模式

    **说明：** 目前，支持设置EIP网卡可见模式的地域包括：华东1（杭州）、华东2（上海）、华北1（青岛）、华北2（北京）、华北3（张家口）、华北5（呼和浩特）、华南1（深圳）、西南1（成都）、新加坡、印度尼西亚（雅加达）、德国（法兰克福）、英国（伦敦）和美国（弗吉尼亚）。


两种绑定模式的区别如下表所示。

|比较点|普通模式|EIP网卡可见模式|
|---|----|---------|
|EIP在操作系统内部的弹性网卡上是否可见|否|是 **说明：** 通过ifconfig或ipconfig获取网卡的公网IP地址。 |
|EIP支持绑定弹性网卡的类型|主弹性网卡和辅助弹性网卡|仅支持绑定辅助弹性网卡|
|主弹性网卡允许绑定的EIP数量|1个|不支持绑定主弹性网卡|
|辅助弹性网卡允许绑定的EIP数量|取决于辅助弹性网卡的私网IP数量**说明：** EIP和辅助弹性网卡的私网IP地址一一映射，如辅助弹性网卡上共有10个私网IP地址，最多可为此弹性网卡绑定10个EIP。

|1个**说明：** 网卡可见模式下，EIP只能绑定辅助弹性网卡上的主私网IP。 |
|EIP绑定辅助弹性网卡，辅助弹性网卡的私网功能是否可用|是|否|
|支持的协议类型|EIP作为NAT ALG（NAT应用层网关）部署时，不支持如H.323、SIP、DNS、RTSP等协议|EIP可支持全部IP协议类型，支持FTP、H.323、SIP、DNS、RTSP、TFTP等协议|

设置EIP普通模式前，请确保满足以下条件：

-   您已经创建了专有网络类型的辅助弹性网卡，且辅助弹性网卡的地域与EIP的地域相同。具体操作，请参见[创建弹性网卡](/cn.zh-CN/网络/弹性网卡/创建弹性网卡.md)。
-   要绑定的辅助弹性网卡未绑定任何ECS实例。如果已经绑定ECS实例，请先解绑，在设置EIP普通模式后，再绑定到ECS实例上。具体操作，请参见[解绑弹性网卡](/cn.zh-CN/网络/弹性网卡/解绑弹性网卡.md)。

1.  登录[弹性公网IP管理控制台](https://vpc.console.aliyun.com/eip)。

2.  在顶部菜单栏处，选择EIP的地域。

3.  在**弹性公网IP**页面，找到目标EIP，然后在**操作**列单击**绑定资源**。

4.  在**绑定弹性公网IP至资源**对话框，完成以下配置，然后单击**确定**。

    |配置|说明|
    |--|--|
    |**实例类型**|选择**辅助弹性网卡**。|
    |**资源组**|选择辅助弹性网卡所属的资源组。|
    |**绑定模式**|选择**普通模式**。在普通模式下：

    -   辅助弹性网卡支持绑定的EIP数量取决于辅助弹性网卡的私网IP数量。
    -   EIP以NAT模式和辅助弹性网卡绑定，辅助弹性网卡的私网IP和公网IP同时可用。
    -   EIP在操作系统内部不可见，需要通过DescribeEipAddresses接口查询出具体网卡上绑定的公网IP地址。更多信息，请参见[DescribeEipAddresses](/cn.zh-CN/API参考/弹性公网IP/DescribeEipAddresses.md)。
    -   EIP不支持需要做NAT ALG的协议，例如H.323、SIP、DNS、RTSP、TFTP等协议。 |
    |**选择要绑定的**|选择要绑定的辅助弹性网卡。要绑定的辅助弹性网卡必须满足以下条件：

    -   辅助弹性网卡的网络类型必须是专有网络。
    -   辅助弹性网卡实例的地域必须和EIP的地域相同。 |


设置EIP网卡可见模式前，请确保满足以下条件：

-   您已经创建了专有网络类型的辅助弹性网卡，且辅助弹性网卡的地域与EIP的地域相同。具体操作，请参见[创建弹性网卡](/cn.zh-CN/网络/弹性网卡/创建弹性网卡.md)。
-   要绑定的辅助弹性网卡未绑定任何ECS实例。如果已经绑定ECS实例，请先解绑，在设置EIP普通模式后，再绑定到ECS实例上。具体操作，请参见[解绑弹性网卡](/cn.zh-CN/网络/弹性网卡/解绑弹性网卡.md)。

1.  登录[弹性公网IP管理控制台](https://vpc.console.aliyun.com/eip)。

2.  在顶部菜单栏处，选择EIP的地域。

3.  在**弹性公网IP**页面，找到目标EIP，然后在**操作**列单击**绑定资源**。

4.  在**绑定弹性公网IP至资源**对话框，完成以下配置，然后单击**确定**。

    |配置|说明|
    |--|--|
    |**实例类型**|选择**辅助弹性网卡**。|
    |**资源组**|选择辅助弹性网卡所属的资源组。|
    |**绑定模式**|选择**EIP网卡可见模式**。|
    |**选择要绑定的**|选择要绑定的辅助弹性网卡。**说明：** 确保选择的辅助弹性网卡未绑定ECS实例。 |

5.  绑定成功后，单击绑定的辅助弹性网卡链接。

    ![查看弹性公网IP绑定的弹性网卡。](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/8520579161/p33382.png)

6.  在**网卡列表**页面，单击**操作**列下的**绑定实例**将弹性网卡绑定到ECS实例上。

    **说明：**

    -   每种实例规格支持绑定的弹性网卡数量不同，更多信息，请参见[实例规格族](/cn.zh-CN/实例/实例规格族.md)。
    -   辅助弹性网卡绑定ECS实例后，您必须在ECS实例中开启辅助弹性网卡的DHCP功能并重新加载网卡，EIP网卡可见模式才生效。
    -   设置EIP网卡可见模式后，ECS实例会自动生成一条出接口为辅助弹性网卡的路由，该条路由的优先级低于出接口为主网卡的路由，请根据您的业务需求调整路由优先级。
7.  使用绑定的EIP登录ECS实例，执行`ipconfig`查看该实例的网络配置。

    **说明：** 确保ECS实例的安全组配置允许远程访问。

    您可以看到该实例的本地IP地址已经变成了EIP的地址。

    ![查看ECS实例上的弹性公网IP](https://static-aliyun-doc.oss-accelerate.aliyuncs.com/assets/img/zh-CN/4394958951/p33443.png)


**EIP绑定弹性网卡后收取EIP实例费吗？**

收取。

当前EIP只有绑定ECS实例后不收取实例费，绑定其他类型的资源都收取实例费。

**弹性网卡绑定EIP，附加到ECS实例后，是否还需要额外配置？**

-   如果ECS实例上部署的是主动对外提供服务的业务，例如web网站，无需在ECS实例上或VPC中配置路由，可以直接使用弹性网卡绑定的EIP对外提供服务。
-   如果ECS实例上部署的是主动访问公网的业务，需要在ECS实例上自定义默认路由或明细路由。默认路由从主网卡出，可以通过调整路由优先级的方式让报文从弹性网卡出公网。您也可以配置明细路由，让报文以负载分担的形式从多个网卡分发或从某一网卡随机地分发出公网。

## 解绑EIP

如果您的云资源不需要公网通信，您可以将云资源与EIP解绑。EIP解绑后，仍需要支付EIP占有费。

1.  登录[弹性公网IP管理控制台](https://vpc.console.aliyun.com/eip)。

2.  在顶部菜单栏处，选择EIP的地域。

3.  在**弹性公网IP**页面，找到目标EIP，然后在**操作**列单击**解除绑定**。

4.  在弹出的对话框，单击**确定**。


**相关文档**  


[UnassociateEipAddress](/cn.zh-CN/API参考/弹性公网IP/UnassociateEipAddress.md)

[AssociateEipAddress](/cn.zh-CN/API参考/弹性公网IP/AssociateEipAddress.md)

